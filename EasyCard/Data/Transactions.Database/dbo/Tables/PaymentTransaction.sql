CREATE TABLE [dbo].[PaymentTransaction] (
    [PaymentTransactionID]                    BIGINT          IDENTITY (1, 1) NOT NULL,
    [InitialTransactionID]                    BIGINT          NULL,
    [TransactionNumber]                       BIGINT          NOT NULL,
    [TerminalID]                              BIGINT          NOT NULL,
    [MerchantID]                              BIGINT          NOT NULL,
    [ProcessorID]                             BIGINT          NULL,
    [AggregatorID]                            BIGINT          NULL,
    [InvoicingID]                             BIGINT          NULL,
    [MarketerID]                              BIGINT          NULL,
    [Status]                                  SMALLINT        NOT NULL,
    [TransactionType]                         INT             NOT NULL,
    [RejectionReason]                         INT             NULL,
    [Currency]                                INT             NOT NULL,
    [CardPresence]                            INT             NOT NULL,
    [CurrentInstallment]                      INT             NOT NULL,
    [TransactionAmount]                       DECIMAL (18, 2) NOT NULL,
    [InitialPaymentAmount]                    DECIMAL (18, 2) NOT NULL,
    [TotalAmount]                             DECIMAL (18, 2) NOT NULL,
    [InstallmentPaymentAmount]                DECIMAL (18, 2) NOT NULL,
    [TransactionDate]                         DATETIME2 (7)   NULL,
    [TransactionTimestamp]                    DATETIME2 (7)   NULL,
    [UpdatedDate]                             DATETIME2 (7)   NULL,
    [BillingOrderID]                          BIGINT          NULL,
    [UpdateTimestamp]                         ROWVERSION      NULL,
    [CreditCardDetails_CardNumber]            NVARCHAR (MAX)  NULL,
    [CardExpiration]                          VARCHAR (5)     NULL,
    [CreditCardDetails_CardBin]               NVARCHAR (MAX)  NULL,
    [CreditCardDetails_CardVendor]            NVARCHAR (MAX)  NULL,
    [CreditCardDetails_CardOwnerNationalID]   NVARCHAR (MAX)  NULL,
    [CreditCardDetails_CardOwnerName]         NVARCHAR (MAX)  NULL,
    [CreditCardDetails_CardToken]             NVARCHAR (MAX)  NULL,
    [DealDescription]                         NVARCHAR (MAX)  NULL,
    [ConsumerEmail]                           VARCHAR (50)    NULL,
    [ConsumerPhone]                           VARCHAR (20)    NULL,
    [ConsumerIP]                              VARCHAR (32)    NULL,
    [MerchantIP]                              VARCHAR (32)    NULL,
    [ShvaShovarNumber]                        VARCHAR (20)    NULL,
    [ShvaDealID]                              VARCHAR (20)    NULL,
    [ShvaTransmissionNumber]                  VARCHAR (20)    NULL,
    [ShvaTerminalID]                          VARCHAR (20)    NULL,
    [ShvaTransactionDetails_TransmissionDate] DATETIME2 (7)   NULL,
    [ManuallyTransmitted]                     BIT             NULL,
    [ClearingHouseTransactionID]              BIGINT          NULL,
    [CreditCardDetails_IsTourist]             BIT             NULL,
    [AggregatorTerminalID]                    VARCHAR (20)    NULL,
    [ProcessorTerminalID]                     VARCHAR (20)    NULL,
    [NumberOfPayments]                        INT             DEFAULT ((0)) NOT NULL,
    CONSTRAINT [PK_PaymentTransaction] PRIMARY KEY CLUSTERED ([PaymentTransactionID] ASC)
);

